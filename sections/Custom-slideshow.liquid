{% schema %}
  {
    "name": "Custom Slideshow",
    "settings": [],
    "blocks": [
      {
        "type": "slide",
        "name": "Slide",
        "settings": [
          { "type": "image_picker", "id": "desktop_image", "label": "Desktop Image" },
          { "type": "image_picker", "id": "mobile_image", "label": "Mobile Image" },
          { "type": "text", "id": "heading", "label": "Heading" },
          { "type": "text", "id": "subheading", "label": "Subheading" },
          { "type": "text", "id": "button_text", "label": "Button Text" },
          { "type": "url", "id": "button_link", "label": "Button Link" },
          { "type": "url", "id": "full_image_link", "label": "Full Image Link (optional)" },
          {
            "type": "select",
            "id": "text_position",
            "label": "Text Position",
            "options": [
              { "value": "left", "label": "Left" },
              { "value": "center", "label": "Centre" },
              { "value": "right", "label": "Right" }
            ],
            "default": "center"
          }
        ]
      }
    ],
    "presets": [{ "name": "Custom Slideshow" }]
  }
  {% endschema %}
  
  <div class="custom-slideshow">
    <div class="custom-slideshow-wrapper">
      {% for block in section.blocks %}
        {% assign desktop_image = block.settings.desktop_image | image_url: width: 2000 %}
        {% assign mobile_image = block.settings.mobile_image | image_url: width: 1000 %}
  
        <div class="custom-slide">
          {% if block.settings.full_image_link != blank %}
            <a href="{{ block.settings.full_image_link }}">
          {% endif %}
            <picture>
              <source media="(max-width: 768px)" srcset="{{ mobile_image }}">
              <img src="{{ desktop_image }}" alt="{{ block.settings.heading | escape }}" loading="lazy">
            </picture>
          {% if block.settings.full_image_link != blank %}
            </a>
          {% endif %}
  
          <div class="custom-slide-content text-{{ block.settings.text_position }}">
            {% if block.settings.heading != blank %}
              <h2>{{ block.settings.heading }}</h2>
            {% endif %}
            {% if block.settings.subheading != blank %}
              <p>{{ block.settings.subheading }}</p>
            {% endif %}
            {% if block.settings.button_text != blank and block.settings.button_link != blank %}
              <a href="{{ block.settings.button_link }}" class="custom-slide-btn">{{ block.settings.button_text }}</a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  
  <style>
  .custom-slideshow-wrapper {
    display: flex;
    overflow: hidden;
    position: relative;
  }
  
  .custom-slide {
    flex: 0 0 100%;
    position: relative;
  }
  
  .custom-slide img {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
  }
  
  .custom-slide-content {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    color: white;
    text-align: center;
    width: 100%;
  }
  
  .custom-slide-content.text-left { text-align: left; left: 10%; }
  .custom-slide-content.text-center { text-align: center; left: 50%; transform: translate(-50%, -50%); }
  .custom-slide-content.text-right { text-align: right; right: 10%; }
  
  .custom-slide-btn {
    display: inline-block;
    margin-top: 10px;
    background: #3dbac2;
    padding: 10px 20px;
    color: white;
    text-decoration: none;
    border-radius: 5px;
  }
  </style>
  